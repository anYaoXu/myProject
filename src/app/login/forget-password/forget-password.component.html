<form nz-form class="small-form" [formGroup]="form">
  <nz-form-item>
    <nz-form-label [nzSpan]="5" nzRequired>手机号</nz-form-label>
    <nz-form-control
      [nzSpan]="16"
      [class.has-error]="$control('mobile').invalid && $control('mobile').dirty"
    >
      <nz-input-group nzCompact [nzAddOnBefore]="addOnBeforeTemplate">
        <ng-template #addOnBeforeTemplate>
          <nz-select style="width:150px" formControlName="countrycode">
            <nz-option
              [nzLabel]="option.name"
              [nzValue]="option.code"
              *ngFor="let option of countryCodeList"
            ></nz-option>
          </nz-select>
        </ng-template>
        <input
          type="text"
          nz-input
          placeholder="手机号"
          formControlName="mobile"
          (keyup.enter)="getControl($event)"
        />
      </nz-input-group>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('mobile').dirty && $control('mobile').hasError('required')
        "
      >
        {{ "required" }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('mobile').dirty && $control('mobile').hasError('mistake')
        "
      >
        {{ "mistake" }}
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSpan]="5" nzRequired>验证码</nz-form-label>
    <nz-form-control [nzSpan]="16">
      <input
        type="text"
        nz-input
        placeholder="验证码"
        formControlName="vcode"
      />
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSpan]="5" required>新密码</nz-form-label>
    <nz-form-control [nzSpan]="16">
      <input
        type="password"
        nz-input
        placeholder="新密码"
        formControlName="newpwd"
        [class.has-error]="
          $control('newpwd').invalid && $control('newpwd').dirty
        "
        (keyup.enter)="getControl($event)"
      />
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('newpwd').dirty && $control('newpwd').hasError('minlength')
        "
      >
        {{ "min" | translate: { value: 6 } }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('newpwd').dirty && $control('newpwd').hasError('maxlength')
        "
      >
        {{ "max" | translate: { value: 16 } }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('newpwd').dirty && $control('newpwd').hasError('mistake')
        "
      >
        {{ "mistake" | translate }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('newpwd').dirty && $control('newpwd').hasError('required')
        "
      >
        {{ "required" | translate }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('newpwd').dirty && $control('newpwd').hasError('confirm')
        "
      >
        {{ "confirm" | translate }}
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSpan]="5" required>确认密码</nz-form-label>
    <nz-form-control [nzSpan]="16">
      <input
        type="password"
        nz-input
        placeholder="确认密码"
        formControlName="repwd"
      />
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('repwd').dirty && $control('repwd').hasError('minlength')
        "
      >
        {{ "min" | translate: { value: 6 } }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('repwd').dirty && $control('repwd').hasError('maxlength')
        "
      >
        {{ "max" | translate: { value: 16 } }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="$control('repwd').dirty && $control('repwd').hasError('mistake')"
      >
        {{ "mistake" | translate }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="
          $control('repwd').dirty && $control('repwd').hasError('required')
        "
      >
        {{ "required" | translate }}
      </nz-form-explain>
      <nz-form-explain
        class="text-error"
        *ngIf="$control('repwd').dirty && $control('repwd').hasError('confirm')"
      >
        {{ "confirm" | translate }}
      </nz-form-explain>
    </nz-form-control>
  </nz-form-item>
</form>
